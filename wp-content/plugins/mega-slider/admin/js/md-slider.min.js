(function(a){a(document).ready(function(){var e=a(".md-wrap").data("url");var f=new MdSliderPanel(e);f.init();if(a("#md-tabs").find(".md-tabs-head").find("li").length===0){a("#add_tab").click()}a("#secondpublish").click(function(g){g.preventDefault();a("#publish").click()});c("#md-settings-posThumb","tp",4);c("#md-settings-styleBorder","bs",10);a("#post").submit(function(h){var g=a.objectToString(f.getSliderData());a("#md-slider-data").val(g);a(".mdt-text, .mdt-input, .mdt-select, .mdt-textarea").attr("disabled","disabled")});a('input[name="md-settings[showLoading]"]').change(function(){if(this.value==1){a(".md-settings-sub-showLoading").show()}else{a(".md-settings-sub-showLoading").hide()}});a("#md-settings-showBullet").change(function(){if(a(this).is(":checked")){a(".md-settings-posThumb").hide();a(".md-settings-sub-showBullet").show()}else{if(a("#md-settings-showThumb").is(":checked")){a(".md-settings-posThumb").show()}a(".md-settings-sub-showBullet").hide()}});a("#md-settings-showThumb").change(function(){if(a(this).is(":checked")){a(".md-settings-sub-showThumb").not(".md-settings-posThumb").show();if(a("#md-settings-showBullet").is(":checked")){a(".md-settings-sub-showThumb.md-settings-posThumb").hide()}else{a(".md-settings-sub-showThumb.md-settings-posThumb").show()}}else{a(".md-settings-sub-showThumb").hide()}});a("#videothumb-pick").click(function(){var h=this,g=wp.media.editor.send.attachment;wp.media.editor.send.attachment=function(j,l){var i=a("#videothumb"),k=i.attr("src");if(l.url&&l.url!==""){i.attr("src",l.url)}wp.media.editor.send.attachment=g};wp.media.editor.open()});a("#md-settings-fullwidth").change(function(){var g=a("#md-settings-width").siblings("label");if(a(this).is(":checked")){g.text("Effect zone width");a(".md-slidewrap").addClass("md-fullwidth").css("width","");a(".md-slide-image").css("width","");a(".md-settings-bgstyle").hide();if(a(this).hasClass("md-ajax-ready")){d()}else{a(this).addClass("md-ajax-ready")}}else{g.text("Width");a(".md-slidewrap").removeClass("md-fullwidth").css("width",a("#md-settings-width").val());a(".md-slide-image").css("width",a("#md-settings-width").val());a(".md-settings-bgstyle").show();if(a(this).hasClass("md-ajax-ready")){b(true)}else{a(this).addClass("md-ajax-ready")}}}).trigger("change");a("#md-settings-bgstyle").change(function(){if(a(this).is(":checked")&&!a("#md-settings-fullwidth").is(":checked")){b(true)}else{d()}})});function b(f){var h=[],e=JSON.parse(a("#mega-old").val()),g;a("#md-tabs").find(".md-tabcontent").each(function(){h.push(JSON.parse(a(".panelsettings",this).val()).fid)});g={action:"mega_resize_bg",fid:h,crop:f,oldWidth:e.width,oldHeight:e.height,width:a("#md-settings-width").val(),height:a("#md-settings-height").val()};a.post(ajaxurl,g,function(i){var j=JSON.parse(i);a("#md-tabs").find(".md-tabcontent").each(function(){var k=a(".md-slide-image",this);k.find("img").remove();k.append(a("<img>").attr("src",j.shift()))})})}function d(){var g=[],e=JSON.parse(a("#mega-old").val()),f;a("#md-tabs").find(".md-tabcontent").each(function(){var h=JSON.parse(a(".panelsettings",this).val()).fid;g.push(h)});f={action:"mega_delete_bg",fid:g,width:a("#md-settings-width").val(),height:a("#md-settings-height").val()};a.post(ajaxurl,f,function(h){var i=JSON.parse(h);a("#md-tabs").find(".md-tabcontent").each(function(){var j=a(".md-slide-image",this);j.find("img").remove();j.append(a("<img>").attr("src",i.shift()))})})}function c(e,g,i){var j='<div class="'+g+'wrap clearfix">';var h=0;for($i=0;$i<=i;$i++){h=a(e+" option:eq("+$i+")").val();if(h){j+='<div id="'+g+h+'" class="slitem"></div>'}}j+="</div>";a(e).parent().append(j);var f=a(e+" option[selected]").val();a("#"+g+f).addClass("selected");a("."+g+"wrap .slitem").each(function(){a(this).click(function(){a("."+g+"wrap .selected").removeClass("selected");a(this).addClass("selected");a(e+" option[selected]").removeAttr("selected");tmpindex=a(this).attr("id").replace(g,"");a(e+" option[value="+tmpindex+"]").attr("selected","selected")})});a(e).hide()}})(jQuery);